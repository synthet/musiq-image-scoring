# MUSIQ Results Analysis Script

## Overview

The `analyze_json_results.py` script analyzes all JSON files generated by the MUSIQ batch processing system to find the best and worst performing images both overall and for each individual model.

## Features

### ‚úÖ **Comprehensive Analysis**
- **Overall Statistics**: Average, min, max scores across all images
- **Model-Specific Statistics**: Individual analysis for SPAQ, AVA, KONIQ, PAQ2PIQ
- **Best/Worst Identification**: Finds top and bottom performers
- **Score Ranges**: Raw and normalized score distributions

### ‚úÖ **Detailed Reporting**
- **Console Output**: Formatted summary with emojis and clear sections
- **JSON Export**: Machine-readable detailed analysis file
- **Error Handling**: Graceful handling of invalid or missing files

## Usage

### **Command Line**
```bash
python analyze_json_results.py --directory "D:/Projects/image-scoring"
python analyze_json_results.py --directory "D:/Photos/Export/2025" --output "my_analysis.json"
```

### **Windows Batch File**
```cmd
analyze_results.bat
```

### **PowerShell Script**
```powershell
.\Analyze-Results.ps1
.\Analyze-Results.ps1 -Directory "D:\Photos\Export\2025"
.\Analyze-Results.ps1 -Directory "D:\Photos\Export\2025" -OutputFile "custom_analysis.json"
```

## Analysis Results

### **Sample Output**
```
================================================================================
MUSIQ BATCH ANALYSIS SUMMARY
================================================================================

üìä OVERALL STATISTICS
Total Images Analyzed: 307
Average Score: 0.643
Score Range: 0.365 - 0.709
Score Spread: 0.344

üèÜ BEST OVERALL IMAGE
  Image: DSC_2130-2.jpg
  Average Score: 0.709

üìâ WORST OVERALL IMAGE
  Image: 20250727_634.jpg
  Average Score: 0.365

üìà MODEL STATISTICS

  SPAQ:
    Successful: 307
    Failed: 0
    Raw Score Range: 20.99 - 80.35
    Normalized Range: 0.21 - 0.803

  AVA:
    Successful: 307
    Failed: 0
    Raw Score Range: 4.22 - 6.05
    Normalized Range: 0.358 - 0.561

üéØ BEST & WORST BY MODEL

  SPAQ:
    Best: DSC_3652-Enhanced-NR-2.jpg (score: 0.803)
    Worst: 20250331_010-Enhanced-NR.jpg (score: 0.21)

  AVA:
    Best: DSC_7344-Enhanced-NR.jpg (score: 0.561)
    Worst: 20250316_2043-Enhanced-NR.jpg (score: 0.358)
```

## JSON Output Format

### **Analysis Summary Structure**
```json
{
  "analysis_date": "2025-10-07T22:36:28.612744",
  "directory": "/mnt/d/Projects/image-scoring",
  "total_images": 307,
  "overall_statistics": {
    "average_score": 0.643,
    "min_score": 0.365,
    "max_score": 0.709,
    "score_range": 0.344,
    "total_successful_predictions": 1228,
    "total_failed_predictions": 0
  },
  "model_statistics": {
    "spaq": {
      "successful_predictions": 307,
      "failed_predictions": 0,
      "raw_scores": {
        "average": 66.11,
        "min": 20.99,
        "max": 80.35
      },
      "normalized_scores": {
        "average": 0.661,
        "min": 0.21,
        "max": 0.803
      }
    }
  },
  "best_worst_images": {
    "overall": {
      "best": {
        "image_name": "DSC_2130-2.jpg",
        "average_normalized_score": 0.709,
        "individual_scores": {
          "spaq": {"score": 75.91, "normalized_score": 0.759},
          "ava": {"score": 5.74, "normalized_score": 0.527},
          "koniq": {"score": 77.69, "normalized_score": 0.777},
          "paq2piq": {"score": 77.26, "normalized_score": 0.773}
        }
      },
      "worst": {
        "image_name": "20250727_634.jpg",
        "average_normalized_score": 0.365,
        "individual_scores": {...}
      }
    },
    "by_model": {
      "spaq": {
        "best": {
          "image_name": "DSC_3652-Enhanced-NR-2.jpg",
          "score": 80.35,
          "normalized_score": 0.803
        },
        "worst": {
          "image_name": "20250331_010-Enhanced-NR.jpg",
          "score": 20.99,
          "normalized_score": 0.21
        }
      }
    }
  }
}
```

## Key Findings from Your Dataset

### **Overall Performance**
- **Total Images**: 307
- **Success Rate**: 100% (all models worked on all images)
- **Average Quality**: 64.3% (0.643 normalized)
- **Quality Range**: 36.5% - 70.9% (wide variation)

### **Best Overall Image**
- **File**: `DSC_2130-2.jpg`
- **Score**: 0.709 (70.9% quality)
- **Consistent high performance across all models**

### **Worst Overall Image**
- **File**: `20250727_634.jpg`
- **Score**: 0.365 (36.5% quality)
- **Poor performance across all models**

### **Model-Specific Insights**

#### **SPAQ Model** (Aesthetic Quality)
- **Best**: `DSC_3652-Enhanced-NR-2.jpg` (80.3%)
- **Worst**: `20250331_010-Enhanced-NR.jpg` (21.0%)
- **Range**: Very wide (59.3% spread)

#### **AVA Model** (Visual Analysis)
- **Best**: `DSC_7344-Enhanced-NR.jpg` (56.1%)
- **Worst**: `20250316_2043-Enhanced-NR.jpg` (35.8%)
- **Range**: Narrowest (20.3% spread) - most consistent model

#### **KONIQ Model** (Natural Image Quality)
- **Best**: `20250412_307-Enhanced-NR-2.jpg` (79.4%)
- **Worst**: `20250727_634.jpg` (22.9%)
- **Range**: Wide (56.5% spread)

#### **PAQ2PIQ Model** (Perceptual Quality)
- **Best**: `20250412_471-Enhanced-NR-2.jpg` (79.2%)
- **Worst**: `20250727_634.jpg` (52.8%)
- **Range**: Narrowest (26.4% spread) - most lenient model

## Files Created

- **`analyze_json_results.py`** - Main analysis script
- **`analyze_results.bat`** - Windows batch wrapper
- **`Analyze-Results.ps1`** - PowerShell script
- **`analysis_summary_YYYYMMDD_HHMMSS.json`** - Detailed analysis results

## Use Cases

1. **Quality Assessment**: Identify your best and worst photos
2. **Model Comparison**: See which models are most/least critical
3. **Batch Analysis**: Process large collections of images
4. **Trend Analysis**: Track quality improvements over time
5. **Portfolio Curation**: Select highest-quality images for display

The analysis script provides comprehensive insights into your image collection's quality distribution and helps identify standout images across different quality assessment criteria.
